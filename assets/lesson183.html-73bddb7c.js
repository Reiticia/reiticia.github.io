import{_ as n,o as s,c as a,a as t}from"./app-d6f5df65.js";const p="/assets/VeryCapture_20220619135320-798669a4.gif",e={},o=t(`<h1 id="animation动画-timeline" tabindex="-1"><a class="header-anchor" href="#animation动画-timeline" aria-hidden="true">#</a> Animation动画 Timeline</h1><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ToggleButton</span> play <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ToggleButton</span><span class="token punctuation">(</span><span class="token string">&quot;play&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token class-name">ToggleButton</span> pause <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ToggleButton</span><span class="token punctuation">(</span><span class="token string">&quot;pause&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token class-name">ToggleButton</span> stop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ToggleButton</span><span class="token punctuation">(</span><span class="token string">&quot;stop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token class-name">ToggleButton</span> action <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ToggleButton</span><span class="token punctuation">(</span><span class="token string">&quot;action&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token class-name">ToggleButton</span> print <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ToggleButton</span><span class="token punctuation">(</span><span class="token string">&quot;print&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token class-name">ToggleGroup</span> toggleGroup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ToggleGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
play<span class="token punctuation">.</span><span class="token function">setToggleGroup</span><span class="token punctuation">(</span>toggleGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>  
pause<span class="token punctuation">.</span><span class="token function">setToggleGroup</span><span class="token punctuation">(</span>toggleGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>  
stop<span class="token punctuation">.</span><span class="token function">setToggleGroup</span><span class="token punctuation">(</span>toggleGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>  
action<span class="token punctuation">.</span><span class="token function">setToggleGroup</span><span class="token punctuation">(</span>toggleGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>  
print<span class="token punctuation">.</span><span class="token function">setToggleGroup</span><span class="token punctuation">(</span>toggleGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token class-name">HBox</span> hBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HBox</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
hBox<span class="token punctuation">.</span><span class="token function">getChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>play<span class="token punctuation">,</span> pause<span class="token punctuation">,</span> stop<span class="token punctuation">,</span> action<span class="token punctuation">,</span> print<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="动画" tabindex="-1"><a class="header-anchor" href="#动画" aria-hidden="true">#</a> 动画</h2><ul><li><p>创建时间线动画，帧率为60（默认）<code>Timeline timeline = new Timeline(60);</code></p></li><li><p>创建时间点</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// kf1配合kf2，效果是原点位置从0水平移动300</span>
<span class="token comment">// kf2配合kf3，效果是从(300,0)位置垂直移动100</span>
<span class="token class-name">KeyValue</span> keyValue1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KeyValue</span><span class="token punctuation">(</span>button<span class="token punctuation">.</span><span class="token function">translateXProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 要改变的监视属性，改变后的属性值  </span>
<span class="token class-name">KeyValue</span> keyValue1y <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KeyValue</span><span class="token punctuation">(</span>button<span class="token punctuation">.</span><span class="token function">translateYProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token class-name">KeyFrame</span> kf1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KeyFrame</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;kf1&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">EventHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActionEvent</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token annotation punctuation">@Override</span>  
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">ActionEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;kf1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span><span class="token punctuation">,</span> keyValue1<span class="token punctuation">,</span> keyValue1y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 动画开始时间、动画名称、动画完成回调函数、动画改变的监视属性  </span>
<span class="token class-name">KeyValue</span> keyValue2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KeyValue</span><span class="token punctuation">(</span>button<span class="token punctuation">.</span><span class="token function">translateXProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token class-name">Interpolator</span><span class="token punctuation">.</span><span class="token constant">EASE_BOTH</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 要改变的监视属性，改变后的属性值，缓慢进入与离开  </span>
<span class="token class-name">KeyValue</span> keyValue2y <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KeyValue</span><span class="token punctuation">(</span>button<span class="token punctuation">.</span><span class="token function">translateYProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 要改变的监视属性，改变后的属性值  </span>
<span class="token class-name">KeyFrame</span> kf2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KeyFrame</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;kf2&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">EventHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActionEvent</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token annotation punctuation">@Override</span>  
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">ActionEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;kf2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span><span class="token punctuation">,</span> keyValue2<span class="token punctuation">,</span> keyValue2y<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token class-name">KeyValue</span> keyValue3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KeyValue</span><span class="token punctuation">(</span>button<span class="token punctuation">.</span><span class="token function">translateYProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 要改变的监视属性，改变后的属性值  </span>
<span class="token class-name">KeyFrame</span> ke3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KeyFrame</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;ke3&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">EventHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ActionEvent</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token annotation punctuation">@Override</span>  
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">ActionEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;kf4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span><span class="token punctuation">,</span> keyValue3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>添加时间点<code>timeline.getKeyFrames().addAll(kf1, kf2, ke3);</code></p></li><li><p>设置动画延迟时间<code>timeline.setDelay(Duration.seconds(1));</code></p></li><li><p>设置动画循环次数（无限循环）<code>timeline.setCycleCount(Timeline.INDEFINITE);</code></p></li><li><p>设置动画循环次数（2次）<code>timeline.setCycleCount(2);</code></p></li><li><p>设置动画是否自动反向播放，循环次数最少为2次<code>timeline.setAutoReverse(true);</code></p></li><li><p>设置动画播放速率，1为正常速率，负数为倒放<code>timeline.setRate(1);</code></p></li><li><p>动画控制</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>timeline<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 播放</span>
timeline<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 暂停</span>
timeline<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 停止</span>
timeline<span class="token punctuation">.</span><span class="token function">jumpTo</span><span class="token punctuation">(</span><span class="token string">&quot;kf2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 跳转到指定的动画时间点  </span>
timeline<span class="token punctuation">.</span><span class="token function">jumpTo</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 跳转到指定的动画时间点  </span>
timeline<span class="token punctuation">.</span><span class="token function">playFromStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 从动画开始时间点开始播放  </span>
timeline<span class="token punctuation">.</span><span class="token function">getCuePoints</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 添加动画时间点  </span>
timeline<span class="token punctuation">.</span><span class="token function">jumpTo</span><span class="token punctuation">(</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
timeline<span class="token punctuation">.</span><span class="token function">playFrom</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 从指定时间点开始播放</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>动画属性</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>timeline<span class="token punctuation">.</span><span class="token function">getTargetFramerate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 获取动画的目标帧速率</span>
timeline<span class="token punctuation">.</span><span class="token function">getTotalDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 获取动画的总时长，单位秒</span>
timeline<span class="token punctuation">.</span><span class="token function">getCurrentTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 获取动画当前时间，单位秒</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>动画完成回调函数</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>timeline<span class="token punctuation">.</span><span class="token function">setOnFinished</span><span class="token punctuation">(</span>event <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>  
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;timeline finished&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>动画状态改变监听</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>timeline<span class="token punctuation">.</span><span class="token function">statusProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span>observable<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>  
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;status = &quot;</span> <span class="token operator">+</span> newValue<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><img src="`+p+'" alt=""></p>',5),c=[o];function l(u,i){return s(),a("div",null,c)}const r=n(e,[["render",l],["__file","lesson183.html.vue"]]);export{r as default};
