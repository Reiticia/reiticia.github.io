import{_ as n,o as s,c as a,a as t}from"./app-d6f5df65.js";const p="/assets/VeryCapture_20220602092416-526c1dd9.gif",e="/assets/VeryCapture_20220602092825-070a3b3a.gif",o={},c=t(`<h1 id="dragboard-鼠标拖拽结合剪贴板" tabindex="-1"><a class="header-anchor" href="#dragboard-鼠标拖拽结合剪贴板" aria-hidden="true">#</a> Dragboard 鼠标拖拽结合剪贴板</h1><h2 id="将标签文本拖拽到输入框中" tabindex="-1"><a class="header-anchor" href="#将标签文本拖拽到输入框中" aria-hidden="true">#</a> 将标签文本拖拽到输入框中</h2><ol><li><p>创建标签和输入框</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Label</span> label <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Label</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
label<span class="token punctuation">.</span><span class="token function">setLayoutX</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
label<span class="token punctuation">.</span><span class="token function">setLayoutY</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token class-name">TextField</span> textField <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
textField<span class="token punctuation">.</span><span class="token function">setLayoutX</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
textField<span class="token punctuation">.</span><span class="token function">setLayoutY</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>标签拖拽检测</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>label<span class="token punctuation">.</span><span class="token function">setOnDragDetected</span><span class="token punctuation">(</span>event <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>  
    <span class="token comment">// 开始拖拽动作（剪切模式，模式不会影响具体效果，最终效果仍需定义代码进行实现）  </span>
    <span class="token class-name">Dragboard</span> dragboard <span class="token operator">=</span> label<span class="token punctuation">.</span><span class="token function">startDragAndDrop</span><span class="token punctuation">(</span><span class="token class-name">TransferMode</span><span class="token punctuation">.</span><span class="token constant">MOVE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token class-name">Text</span> text <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>label<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">// 设置拖拽时的图标</span>
    <span class="token class-name">WritableImage</span> writableImage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WritableImage</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> label<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> label<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    text<span class="token punctuation">.</span><span class="token function">snapshot</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SnapshotParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> writableImage<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    dragboard<span class="token punctuation">.</span><span class="token function">setDragView</span><span class="token punctuation">(</span>writableImage<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">// 将文本内容复制到拖拽剪贴板中</span>
    <span class="token class-name">ClipboardContent</span> content <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClipboardContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    content<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span>label<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    dragboard<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>拖拽经过textField</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>textField<span class="token punctuation">.</span><span class="token function">setOnDragOver</span><span class="token punctuation">(</span>event <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>  
    <span class="token comment">// 于上面的设置的模式相同，如果不写此行，下面setOnDragDropped不会生效  </span>
    event<span class="token punctuation">.</span><span class="token function">acceptTransferModes</span><span class="token punctuation">(</span><span class="token class-name">TransferMode</span><span class="token punctuation">.</span><span class="token constant">MOVE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在textField上释放拖拽动作</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>textField<span class="token punctuation">.</span><span class="token function">setOnDragDropped</span><span class="token punctuation">(</span>event <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>  
    <span class="token comment">// 获得拖拽面板的数据  </span>
    textField<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getDragboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    event<span class="token punctuation">.</span><span class="token function">setDropCompleted</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ClipboardContent</span> content <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClipboardContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
content<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">DataFormat</span><span class="token punctuation">.</span><span class="token constant">IMAGE</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token string">&quot;file:E:\\\\Users\\\\86158\\\\图片\\\\110300202.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
clipboard<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
label<span class="token punctuation">.</span><span class="token function">setOnDragDone</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">EventHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DragEvent</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token annotation punctuation">@Override</span>  
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">DragEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getTransferMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">TransferMode</span><span class="token punctuation">.</span><span class="token constant">MOVE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            label<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+p+`" alt=""></p></li></ol><h2 id="将外部图片拖拽到界面中" tabindex="-1"><a class="header-anchor" href="#将外部图片拖拽到界面中" aria-hidden="true">#</a> 将外部图片拖拽到界面中</h2><ol><li><p>拖拽进入到hBox</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>hBox<span class="token punctuation">.</span><span class="token function">setOnDragEntered</span><span class="token punctuation">(</span>event <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>  
    <span class="token comment">// 设置拖拽进入时的边框效果</span>
    hBox<span class="token punctuation">.</span><span class="token function">setBorder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Border</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BorderStroke</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">,</span> <span class="token class-name">BorderStrokeStyle</span><span class="token punctuation">.</span><span class="token constant">SOLID</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">CornerRadii</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BorderWidths</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">// System.out.println(&quot;setOnDragEntered:event.getTransferMode() = &quot; + event.getTransferMode());  // MOVE  </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>拖拽退出到hBox外</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>hBox<span class="token punctuation">.</span><span class="token function">setOnDragExited</span><span class="token punctuation">(</span>event <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>  
    hBox<span class="token punctuation">.</span><span class="token function">setBorder</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>拖拽经过hBox</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>hBox<span class="token punctuation">.</span><span class="token function">setOnDragOver</span><span class="token punctuation">(</span>event <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>  
    <span class="token comment">// System.out.println(&quot;setOnDragOver:event.getTransferMode() = &quot; + event.getTransferMode());  // MOVE  </span>
    event<span class="token punctuation">.</span><span class="token function">acceptTransferModes</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getTransferMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>拖拽释放</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>hBox<span class="token punctuation">.</span><span class="token function">setOnDragDropped</span><span class="token punctuation">(</span>event <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>  
    <span class="token comment">// 获取拖拽面板  </span>
    <span class="token class-name">Dragboard</span> dragboard <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getDragboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">// 加载URL  </span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dragboard<span class="token punctuation">.</span><span class="token function">hasUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        imageView<span class="token punctuation">.</span><span class="token function">setImage</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span>dragboard<span class="token punctuation">.</span><span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p><img src="`+e+'" alt=""></p>',6),l=[c];function u(i,k){return s(),a("div",null,l)}const d=n(o,[["render",u],["__file","lesson080.html.vue"]]);export{d as default};
